// Recording Models
// Video and audio recording management

enum RecordingType {
  VIDEO
  AUDIO
  SCREEN
}

enum RecordingStatus {
  PENDING
  PROCESSING
  READY
  FAILED
}

model Recording {
  id String @id @default(cuid())

  meetingId String
  meeting   Meeting @relation(fields: [meetingId], references: [id], onDelete: Cascade)

  // Storage info
  url      String
  filename String?
  format   String // e.g., "webm", "mp4", "mp3"
  size     Int? // File size in bytes
  duration Int? // Duration in seconds

  // Type of recording
  type RecordingType @default(VIDEO)

  // Processing status (for audio extraction)
  status RecordingStatus @default(PENDING)

  // Storage metadata
  storagePath String?                // Local filesystem path
  storageType String  @default("local") // "local" | "s3" | "minio"
  checksum    String?                // SHA-256 for deduplication

  // Upload metadata
  uploadedBy String?   // userId who uploaded
  uploadedAt DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([meetingId, checksum]) // Prevent duplicate uploads
  @@index([meetingId])
}
